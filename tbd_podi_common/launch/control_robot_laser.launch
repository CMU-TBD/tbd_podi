<launch>
	<arg name="robot_name"						default="podi" />
	<arg name="rosariaPort" 					default="/dev/ttyUSB0"/>
	<arg name="rosariaPublishLasers" 			default="true"/>
	<arg name="joystickDevicePath" 				default="/dev/input/js0"/>
	<arg name="rosbag_recording_base_path" 		default="$(find tbd_podi_common)/bagfiles/"/>
	<arg name="playback_rosbag_path" 			default=""/>
	<arg name="xacro" 							default="$(find tbd_podi_description)/urdf/podi.urdf.xacro"/>  	
	<arg name="launch_rviz" 					default="false" />
	<arg name="rviz_config_path" 				default="$(find tbd_podi_common)/rviz/podi_default_laser.rviz" />
	<arg name="sim" 							default="false"/>
	<arg name="use_joy" 						default="true" />
	<arg name="motor_topic_name" 				default="RosAria/cmd_vel" />
	<arg name="incoming_laser_topic_name"		default="RosAria/lms1xx_1_laserscan" />
	<arg name="trans_laser_topic_name"			default="$(arg robot_name)/laser" />

	<include file="$(find tbd_podi_common)/launch/control_robot_base.launch">
		<arg name="rosariaPort" 				value="$(arg rosariaPort)"/>
		<arg name="rosariaPublishLasers" 		value="$(arg rosariaPublishLasers)"/>
		<arg name="joystickDevicePath" 			value="$(arg joystickDevicePath)"/>
		<arg name="rosbag_recording_base_path" 	value="$(arg rosbag_recording_base_path)"/>
		<arg name="playback_rosbag_path" 		value="$(arg playback_rosbag_path)"/>
		<arg name="xacro"						value="$(arg xacro)"/>
		<arg name="launch_rviz"					value="$(arg launch_rviz)"/>
		<arg name="rviz_config_path"			value="$(arg rviz_config_path)"/>
		<arg name="sim" 						value="$(arg sim)"/>
		<arg name="use_joy" 					value="$(arg use_joy)" />
		<arg name="motor_topic_name" 			value="$(arg motor_topic_name)" />
	</include>

	<!-- Launch the nodes that crop its readings -->
  	<node pkg="tbd_podi_common" type="laser_scan_frame_transform" name="podi_laser_scan_frame_transform" output="screen">
		<remap from="laser" 			to="$(arg incoming_laser_topic_name)" />
		<remap from="transformed_laser" to="$(arg trans_laser_topic_name)" />
	</node>
	
</launch>
